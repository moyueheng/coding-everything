---
name: dev-executing-plans
description: 当有书面实施计划要在单独会话中执行并带审查检查点时使用
---

# 执行计划

## 概述

加载计划，批判性审查，分批执行任务，并在批次之间汇报以供审查。

**核心原则：** 批量执行带架构师审查检查点。

**开始时宣布：** "I'm using the executing-plans skill to implement this plan."

## 流程

### 步骤 1：加载和审查计划
1. 读取计划文件
2. 批判性审查 - 识别对计划的任何问题或担忧
3. 如有担忧：在开始前向你的 human partner 提出
4. 如无担忧：创建 TodoWrite 并继续

### 步骤 2：执行批次
**默认：前 3 个任务**

对每个任务：
1. 标记为 in_progress
2. **如果任务涉及编写测试或实现代码，先调用 `dev-tdd` skill**
3. 精确遵循每一步（计划有小步骤）
4. 按要求运行验证
5. 标记为 completed

### 步骤 3：报告
批次完成时：
- 展示实现内容
- 展示验证输出
- 说："准备反馈。"

### 步骤 4：继续
基于反馈：
- 应用需要的更改
- 执行下一批次
- 重复直到完成

### 步骤 5：完成开发

所有任务完成并验证后：
- 宣布："I'm using the finishing-a-development-branch skill to complete this work."
- **必需子 skill：** 使用 `dev-finishing-branch`
- 遵循该 skill 验证测试、展示选项、执行选择

## 何时停止并求助

**在以下情况应立即停止执行：**
- 批次中遇到阻塞（缺少依赖、测试失败、指令不清楚）
- 计划有严重缺口无法开始
- 不理解某个指令
- 验证反复失败

**请求澄清而不是猜测。**

## 何时返回早期步骤

**在以下情况应返回审查（步骤 1）：**
- 合作伙伴基于你的反馈更新计划
- 基本方案需要重新思考

**不要强行突破阻塞** - 停下来询问。

## TDD 任务执行

当执行计划中的实现任务时：

### 识别 TDD 任务

如果任务包含以下关键词，**必须调用 dev-tdd**：
- "编写测试"
- "RED"
- "GREEN"
- "TDD"
- "dev-tdd"

### TDD 执行流程

1. **读取任务时**
   - 注意任务中的 `> **给 Kimi：** 此任务使用 dev-tdd` 标记
   - 识别 RED/GREEN/REFACTOR 步骤

2. **执行每个步骤时**
   - 步骤说"调用 dev-tdd"时，读取并遵循 dev-tdd skill
   - 不要跳过"验证 RED"和"验证 GREEN"步骤
   - 测试必须失败于预期原因，然后通过

3. **遇到问题**
   - 测试不失败？检查测试代码
   - 测试不通过？检查实现代码
   - 无法解决？停止并报告

## 记住
- 先批判性审查计划
- 精确遵循计划步骤
- **实现任务调用 `dev-tdd` skill**
- 不要跳过验证（特别是"看着测试失败"）
- 计划说使用 skill 时就引用 skill
- 批次间：只报告并等待
- 遇到阻塞停止，不要猜测
- 未经用户明确同意绝不在 main/master 分支开始实现

## 集成

**必需工作流 skill：**
- **dev-git-worktrees** - 必需：开始前设置隔离工作区
- **dev-writing-plans** - 创建此 skill 执行的计划
- **dev-tdd** - 必需：执行实现任务时遵循测试驱动开发
- **dev-finishing-branch** - 所有任务完成后完成开发
